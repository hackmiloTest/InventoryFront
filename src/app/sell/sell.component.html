<div class="purchase-form-page">
  <p *ngIf="message" class="message">{{ message }}</p>
  <h1>Sell Product</h1>

  <form (ngSubmit)="handleSubmit()">
    <!-- Buscador de productos -->
    <div class="form-group">
      <label>Search Product</label>
      <input 
        type="text" 
        [(ngModel)]="productSearchTerm" 
        (input)="onProductSearch()"
        name="productSearch"
        class="form-control"
        placeholder="Type product name or SKU..."
      />
      <!-- Resultados de búsqueda (máx. 3) -->
      <div class="search-results" *ngIf="filteredProducts.length > 0 && productSearchTerm.length >= 2">
        <div 
          *ngFor="let product of filteredProducts" 
          class="result-item"
          (click)="selectProduct(product)"
        >
          {{ product.name }} (SKU: {{ product.sku }})
        </div>
      </div>
      <!-- Campo oculto para el ID del producto seleccionado -->
      <input type="hidden" [(ngModel)]="productId" name="productId">
    </div>

    <!-- Descripción y Cantidad (siempre visibles) -->
    <div class="form-group">
      <label>Description</label>
      <input 
        type="text" 
        [(ngModel)]="description" 
        name="description" 
        class="form-control"
      />
    </div>

    <div class="form-group">
      <label>Quantity</label>
      <input 
        type="number" 
        [(ngModel)]="quantity" 
        name="quantity" 
        class="form-control"
      />
    </div>

    <!-- Botón de Submit (siempre visible) -->
    <button type="submit" class="btn btn-primary">Sell Product</button>
  </form>
</div>